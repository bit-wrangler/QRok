"use strict";var qrcodegen=new function(){this.QrCode=function(t,e,v,d){if(e<-1||7<e)throw"Mask value out of range";if(v<p||w<v)throw"Version value out of range";for(var c=4*v+17,r=[],n=0;n<c;n++)r.push(!1);var g=[],f=[];for(n=0;n<c;n++)g.push(r.slice()),f.push(r.slice());if(function(){for(var t=0;t<c;t++)h(6,t,t%2==0),h(t,6,t%2==0);s(3,3),s(c-4,3),s(3,c-4);for(var e=C.getAlignmentPatternPositions(v),r=e.length,t=0;t<r;t++)for(var n=0;n<r;n++)0==t&&0==n||0==t&&n==r-1||t==r-1&&0==n||u(e[t],e[n]);a(0),function(){if(v<7)return;for(var t=v,e=0;e<12;e++)t=t<<1^7973*(t>>>11);var r=v<<12|t;if(r>>>18!=0)throw"Assertion error";for(var e=0;e<18;e++){var n=E(r,e),o=c-11+e%3,i=Math.floor(e/3);h(o,i,n),h(i,o,n)}}()}(),function(t){if(t.length!=Math.floor(C.getNumRawDataModules(v)/8))throw"Invalid argument";for(var e=0,r=c-1;1<=r;r-=2){6==r&&(r=5);for(var n=0;n<c;n++)for(var o=0;o<2;o++){var i=r-o,a=0==(r+1&2),s=a?c-1-n:n;!f[s][i]&&e<8*t.length&&(g[s][i]=E(t[e>>>3],7-(7&e)),e++)}}if(e!=8*t.length)throw"Assertion error"}(function(t){if(t.length!=C.getNumDataCodewords(v,d))throw"Invalid argument";for(var e=C.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][v],r=C.ECC_CODEWORDS_PER_BLOCK[d.ordinal][v],n=Math.floor(C.getNumRawDataModules(v)/8),o=e-n%e,i=Math.floor(n/e),a=[],s=new R(r),f=0,u=0;f<e;f++){var h=t.slice(u,u+i-r+(f<o?0:1));u+=h.length;var l=s.getRemainder(h);f<o&&h.push(0),l.forEach(function(t){h.push(t)}),a.push(h)}for(var c=[],f=0;f<a[0].length;f++)for(var g=0;g<a.length;g++)(f!=i-r||o<=g)&&c.push(a[g][f]);if(c.length!=n)throw"Assertion error";return c}(t)),-1==e){var o=1/0;for(n=0;n<8;n++){a(n),l(n);var i=m();i<o&&(e=n,o=i),l(n)}}if(e<0||7<e)throw"Assertion error";function a(t){for(var e=d.formatBits<<3|t,r=e,n=0;n<10;n++)r=r<<1^1335*(r>>>9);if(e=e<<10|r,(e^=21522)>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)h(8,n,E(e,n));h(8,7,E(e,6)),h(8,8,E(e,7)),h(7,8,E(e,8));for(n=9;n<15;n++)h(14-n,8,E(e,n));for(n=0;n<=7;n++)h(c-1-n,8,E(e,n));for(n=8;n<15;n++)h(8,c-15+n,E(e,n));h(8,c-8,!0)}function s(t,e){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var o=Math.max(Math.abs(r),Math.abs(n)),i=t+n,a=e+r;0<=i&&i<c&&0<=a&&a<c&&h(i,a,2!=o&&4!=o)}}function u(t,e){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)h(t+n,e+r,1!=Math.max(Math.abs(r),Math.abs(n)))}function h(t,e,r){g[e][t]=r,f[e][t]=!0}function l(t){if(t<0||7<t)throw"Mask value out of range";for(var e=0;e<c;e++)for(var r=0;r<c;r++){var n;switch(t){case 0:n=(r+e)%2==0;break;case 1:n=e%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+e)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(e/2))%2==0;break;case 5:n=r*e%2+r*e%3==0;break;case 6:n=(r*e%2+r*e%3)%2==0;break;case 7:n=((r+e)%2+r*e%3)%2==0;break;default:throw"Assertion error"}g[e][r]^=n&!f[e][r]}}function m(){for(var t=0,e=0;e<c;e++)for(var r,n,o=0;o<c;o++)0==o||g[e][o]!=n?(n=g[e][o],r=1):5==++r?t+=C.PENALTY_N1:5<r&&t++;for(o=0;o<c;o++){var i,a;for(e=0;e<c;e++)0==e||g[e][o]!=a?(a=g[e][o],i=1):5==++i?t+=C.PENALTY_N1:5<i&&t++}for(e=0;e<c-1;e++)for(o=0;o<c-1;o++){var s=g[e][o];s==g[e][o+1]&&s==g[e+1][o]&&s==g[e+1][o+1]&&(t+=C.PENALTY_N2)}for(e=0;e<c;e++){o=0;for(var f=0;o<c;o++)f=f<<1&2047|(g[e][o]?1:0),10<=o&&(93==f||1488==f)&&(t+=C.PENALTY_N3)}for(o=0;o<c;o++)for(e=0,f=0;e<c;e++)f=f<<1&2047|(g[e][o]?1:0),10<=e&&(93==f||1488==f)&&(t+=C.PENALTY_N3);var u=0;g.forEach(function(t){t.forEach(function(t){t&&u++})});for(var h=c*c,l=0;20*u<(9-l)*h||(11+l)*h<20*u;l++)t+=C.PENALTY_N4;return t}function E(t,e){return 0!=(t>>>e&1)}a(e),l(e),Object.defineProperty(this,"version",{value:v}),Object.defineProperty(this,"size",{value:c}),Object.defineProperty(this,"errorCorrectionLevel",{value:d}),Object.defineProperty(this,"mask",{value:e}),this.getModule=function(t,e){return 0<=t&&t<c&&0<=e&&e<c&&g[e][t]},this.drawCanvas=function(t,e,r){if(t<=0||e<0)throw"Value out of range";var n=(c+2*e)*t;r.width=n,r.height=n;for(var o=r.getContext("2d"),i=-e;i<c+e;i++)for(var a=-e;a<c+e;a++)o.fillStyle=this.getModule(a,i)?"#000000":"#FFFFFF",o.fillRect((a+e)*t,(i+e)*t,t,t)},this.toSvgString=function(t){if(t<0)throw"Border must be non-negative";for(var e=[],r=-t;r<c+t;r++)for(var n=-t;n<c+t;n++)this.getModule(n,r)&&e.push("M"+(n+t)+","+(r+t)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(c+2*t)+" "+(c+2*t)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+e.join(" ")+'" fill="#000000"/>\n</svg>\n'}},this.QrCode.encodeText=function(t,e){var r=qrcodegen.QrSegment.makeSegments(t);return this.encodeSegments(r,e)},this.QrCode.encodeBinary=function(t,e){var r=qrcodegen.QrSegment.makeBytes(t);return this.encodeSegments([r],e)},this.QrCode.encodeSegments=function(t,e,r,n,o,i){if(null==r&&(r=p),null==n&&(n=w),null==o&&(o=-1),null==i&&(i=!0),!(p<=r&&r<=n&&n<=w)||o<-1||7<o)throw"Invalid value";var a,s;for(a=r;;a++){var f=8*C.getNumDataCodewords(a,e);if(null!=(s=qrcodegen.QrSegment.getTotalBits(t,a))&&s<=f)break;if(n<=a)throw"Data too long"}[this.Ecc.MEDIUM,this.Ecc.QUARTILE,this.Ecc.HIGH].forEach(function(t){i&&s<=8*C.getNumDataCodewords(a,t)&&(e=t)});f=8*C.getNumDataCodewords(a,e);var u=new l;t.forEach(function(t){u.appendBits(t.mode.modeBits,4),u.appendBits(t.numChars,t.mode.numCharCountBits(a)),t.getBits().forEach(function(t){u.push(t)})}),u.appendBits(0,Math.min(4,f-u.length)),u.appendBits(0,(8-u.length%8)%8);for(var h=236;u.length<f;h^=253)u.appendBits(h,8);if(u.length%8!=0)throw"Assertion error";return new this(u.getBytes(),o,a,e)};var p=1,w=40;Object.defineProperty(this.QrCode,"MIN_VERSION",{value:p}),Object.defineProperty(this.QrCode,"MAX_VERSION",{value:w});var C={};function t(t,e){Object.defineProperty(this,"ordinal",{value:t}),Object.defineProperty(this,"formatBits",{value:e})}C.getAlignmentPatternPositions=function(t){if(t<p||w<t)throw"Version number out of range";if(1==t)return[];var e,r=4*t+17,n=Math.floor(t/7)+2;e=32!=t?2*Math.ceil((r-13)/(2*n-2)):26;for(var o=[6],i=0,a=r-7;i<n-1;i++,a-=e)o.splice(1,0,a);return o},C.getNumRawDataModules=function(t){if(t<p||w<t)throw"Version number out of range";var e=(16*t+128)*t+64;if(2<=t){var r=Math.floor(t/7)+2;e-=(25*r-10)*r-55,7<=t&&(e-=36)}return e},C.getNumDataCodewords=function(t,e){if(t<p||w<t)throw"Version number out of range";return Math.floor(C.getNumRawDataModules(t)/8)-C.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*C.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]},C.PENALTY_N1=3,C.PENALTY_N2=3,C.PENALTY_N3=40,C.PENALTY_N4=10,C.ECC_CODEWORDS_PER_BLOCK=[[null,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[null,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],C.NUM_ERROR_CORRECTION_BLOCKS=[[null,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[null,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[null,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[null,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],this.QrCode.Ecc={LOW:new t(0,1),MEDIUM:new t(1,0),QUARTILE:new t(2,3),HIGH:new t(3,2)},this.QrSegment=function(t,e,r){if(e<0||!(t instanceof n))throw"Invalid argument";r=r.slice(),Object.defineProperty(this,"mode",{value:t}),Object.defineProperty(this,"numChars",{value:e}),this.getBits=function(){return r.slice()}},this.QrSegment.makeBytes=function(t){var e=new l;return t.forEach(function(t){e.appendBits(t,8)}),new this(this.Mode.BYTE,t.length,e)},this.QrSegment.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";var e,r=new l;for(e=0;e+3<=t.length;e+=3)r.appendBits(parseInt(t.substr(e,3),10),10);var n=t.length-e;return 0<n&&r.appendBits(parseInt(t.substring(e),10),3*n+1),new this(this.Mode.NUMERIC,t.length,r)},this.QrSegment.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var e,r=new l;for(e=0;e+2<=t.length;e+=2){var n=45*o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e));n+=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),r.appendBits(n,11)}return e<t.length&&r.appendBits(o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6),new this(this.Mode.ALPHANUMERIC,t.length,r)},this.QrSegment.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[this.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[this.makeAlphanumeric(t)]:[this.makeBytes(function(t){t=encodeURI(t);for(var e=[],r=0;r<t.length;r++)"%"!=t.charAt(r)?e.push(t.charCodeAt(r)):(e.push(parseInt(t.substr(r+1,2),16)),r+=2);return e}(t))]},this.QrSegment.makeEci=function(t){var e=new l;if(0<=t&&t<128)e.appendBits(t,8);else if(128<=t&&t<16384)e.appendBits(2,2),e.appendBits(t,14);else{if(!(16384<=t&&t<1e6))throw"ECI assignment value out of range";e.appendBits(6,3),e.appendBits(t,21)}return new this(this.Mode.ECI,0,e)},this.QrSegment.getTotalBits=function(t,e){if(e<p||w<e)throw"Version number out of range";for(var r=0,n=0;n<t.length;n++){var o=t[n],i=o.mode.numCharCountBits(e);if(o.numChars>=1<<i)return null;r+=4+i+o.getBits().length}return r};var o={};function n(t,e){Object.defineProperty(this,"modeBits",{value:t}),this.numCharCountBits=function(t){if(1<=t&&t<=9)return e[0];if(10<=t&&t<=26)return e[1];if(27<=t&&t<=40)return e[2];throw"Version number out of range"}}function R(t){if(t<1||255<t)throw"Degree out of range";for(var o=[],e=0;e<t-1;e++)o.push(0);o.push(1);var r=1;for(e=0;e<t;e++){for(var n=0;n<o.length;n++)o[n]=R.multiply(o[n],r),n+1<o.length&&(o[n]^=o[n+1]);r=R.multiply(r,2)}this.getRemainder=function(t){var n=o.map(function(){return 0});return t.forEach(function(t){var e=t^n.shift();n.push(0);for(var r=0;r<n.length;r++)n[r]^=R.multiply(o[r],e)}),n}}function l(){this.getBytes=function(){for(var r=[];8*r.length<this.length;)r.push(0);return this.forEach(function(t,e){r[e>>>3]|=t<<7-(7&e)}),r},this.appendBits=function(t,e){if(e<0||31<e||t>>>e!=0)throw"Value out of range";for(var r=e-1;0<=r;r--)this.push(t>>>r&1)}}this.QrSegment.NUMERIC_REGEX=/^[0-9]*$/,this.QrSegment.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",this.QrSegment.Mode={NUMERIC:new n(1,[10,12,14]),ALPHANUMERIC:new n(2,[9,11,13]),BYTE:new n(4,[8,16,16]),KANJI:new n(8,[8,10,12]),ECI:new n(7,[0,0,0])},R.multiply=function(t,e){if(t>>>8!=0||e>>>8!=0)throw"Byte out of range";for(var r=0,n=7;0<=n;n--)r=r<<1^285*(r>>>7),r^=(e>>>n&1)*t;if(r>>>8!=0)throw"Assertion error";return r},l.prototype=Object.create(Array.prototype)};